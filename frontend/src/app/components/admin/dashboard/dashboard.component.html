<div class="min-h-screen bg-gray-900 text-white">
  <!-- Admin Navigation -->
  <nav class="fixed top-0 w-full z-50 bg-black/90 backdrop-blur-md border-b border-red-600/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="text-2xl font-bold text-gradient">CR7 FOODS ADMIN</div>
        <div class="flex items-center space-x-6">
          <div class="hidden md:flex space-x-6">
            <a href="/admin/dashboard" class="text-red-600 font-semibold">Dashboard</a>
            <a href="/admin/orders" class="hover:text-red-600 transition-colors">Orders</a>
            <a href="/admin/foods" class="hover:text-red-600 transition-colors">Foods</a>
          </div>
          <button
            (click)="logout()"
            class="btn-secondary text-sm px-4 py-2"
          >
            Logout
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Dashboard Header -->
  <section class="pt-24 pb-12 px-4">
    <div class="max-w-7xl mx-auto">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
        <div>
          <h1 class="text-4xl md:text-5xl font-bold text-gradient mb-4">
            Admin Dashboard
          </h1>
          <p class="text-xl text-gray-300">
            Welcome back! Here's what's happening with your restaurant today.
          </p>
        </div>
        <div class="mt-4 md:mt-0">
          <div class="text-right">
            <div class="text-3xl font-bold text-red-600">{{ currentTime | date:'shortTime' }}</div>
            <div class="text-gray-400">{{ currentDate | date:'mediumDate' }}</div>
            <button
              (click)="refreshData()"
              [disabled]="isLoading"
              class="mt-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors disabled:opacity-50"
            >
              <i class="fas fa-sync-alt mr-1" [class]="isLoading ? 'fa-spin' : ''"></i>
              Refresh
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Cards -->
  <section class="pb-12 px-4">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Orders -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-3xl font-bold text-red-600">{{ totalOrders }}</div>
              <div class="text-gray-400">Total Orders</div>
            </div>
            <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
              <i class="fas fa-shopping-cart text-white"></i>
            </div>
          </div>
          <div class="mt-4">
            <div class="text-green-500 text-sm">
              <i class="fas fa-arrow-up mr-1"></i>
              +12% from last month
            </div>
          </div>
        </div>

        <!-- Total Revenue -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-3xl font-bold text-green-500">₹{{ totalRevenue }}</div>
              <div class="text-gray-400">Total Revenue</div>
            </div>
            <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center">
              <i class="fas fa-rupee-sign text-white"></i>
            </div>
          </div>
          <div class="mt-4">
            <div class="text-green-500 text-sm">
              <i class="fas fa-arrow-up mr-1"></i>
              +8% from last month
            </div>
          </div>
        </div>

        <!-- Total Users -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-3xl font-bold text-blue-500">{{ totalUsers }}</div>
              <div class="text-gray-400">Total Users</div>
            </div>
            <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center">
              <i class="fas fa-users text-white"></i>
            </div>
          </div>
          <div class="mt-4">
            <div class="text-green-500 text-sm">
              <i class="fas fa-arrow-up mr-1"></i>
              +15% from last month
            </div>
          </div>
        </div>

        <!-- Total Foods -->
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-3xl font-bold text-purple-500">{{ totalFoods }}</div>
              <div class="text-gray-400">Menu Items</div>
            </div>
            <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center">
              <i class="fas fa-utensils text-white"></i>
            </div>
          </div>
          <div class="mt-4">
            <div class="text-green-500 text-sm">
              <i class="fas fa-arrow-up mr-1"></i>
              +3 new items
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Activity & Quick Actions -->
  <section class="pb-20 px-4">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Recent Orders With Status Management -->
        <div class="bg-gray-800 rounded-xl p-6">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold">Recent Orders</h2>
            <a routerLink="/admin/orders" class="text-red-600 hover:text-red-500 text-sm">
              View All Orders
            </a>
          </div>
          <div class="mt-6 grid grid-cols-2 lg:grid-cols-4 gap-2 text-xs">
            <div class="bg-green-600/20 text-green-400 p-2 rounded text-center">
              <div class="font-bold">{{ deliveredOrders }}</div>
              <div>Delivered</div>
            </div>
            <div class="bg-blue-600/20 text-blue-400 p-2 rounded text-center">
              <div class="font-bold">{{ preparingOrders }}</div>
              <div>Preparing</div>
            </div>
            <div class="bg-yellow-600/20 text-yellow-400 p-2 rounded text-center">
              <div class="font-bold">{{ pendingOrders }}</div>
              <div>Pending</div>
            </div>
            <div class="bg-red-600/20 text-red-400 p-2 rounded text-center">
              <div class="font-bold">{{ totalOrders - deliveredOrders - preparingOrders - pendingOrders }}</div>
              <div>Cancelled</div>
            </div>
          </div>
          <div class="mt-4 pt-4 border-t border-gray-700">
            <div class="text-sm text-gray-400">
              <div class="flex justify-between">
                <span>Total Revenue:</span>
                <span class="text-green-400 font-semibold">₹{{ totalRevenue }}</span>
              </div>
              <div class="flex justify-between mt-1">
                <span>Avg Delivery:</span>
                <span class="text-blue-400">30 mins</span>
              </div>
            </div>
          </div>
          <ng-template #loadingTemplate>
            <div class="p-4 border border-gray-700 rounded-lg bg-gray-750/50">
              <div class="text-center text-gray-400 py-8">
                <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                <p>Loading dashboard...</p>
              </div>
            </div>
          </ng-template>

          <div class="space-y-4" *ngIf="!isLoading; else loadingTemplate">
            <div class="p-4 border border-gray-700 rounded-lg bg-gray-750/50 hover:bg-gray-750 transition-colors" *ngFor="let order of recentOrders">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-shopping-bag text-white text-sm"></i>
                  </div>
                  <div>
                    <div class="font-semibold">Order #{{ order._id?.slice(-6).toUpperCase() }}</div>
                    <div class="text-sm text-gray-400">{{ order.createdAt | date:'short' }}</div>
                  </div>
                </div>
                <div class="text-right">
                  <div class="font-semibold text-lg">₹{{ order.totalAmount }}</div>
                  <div class="flex items-center space-x-2 mt-1">
                    <select
                      [value]="order.status"
                      (change)="updateOrderStatus(order._id, $event)"
                      class="text-xs px-2 py-1 rounded bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-red-600"
                      [ngClass]="{
                        'text-yellow-400': order.status === 'pending',
                        'text-blue-400': order.status === 'preparing',
                        'text-green-400': order.status === 'delivered',
                        'text-gray-400': order.status === 'cancelled'
                      }"
                    >
                      <option value="pending">Pending</option>
                      <option value="preparing">Preparing</option>
                      <option value="delivered">Delivered</option>
                      <option value="cancelled">Cancelled</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Order Items Summary -->
              <div class="mt-3 text-sm text-gray-400">
                <div class="flex items-center justify-between">
                  <span>{{ order.items?.length || 0 }} items</span>
                  <span>{{ order.phone }}</span>
                </div>
                <div class="truncate mt-1">{{ order.deliveryAddress }}</div>
              </div>
            </div>

            <div *ngIf="recentOrders.length === 0" class="text-center py-8 text-gray-400">
              <i class="fas fa-inbox text-4xl mb-4"></i>
              <p>No recent orders yet</p>
              <p class="text-xs mt-1">Orders will appear here when placed</p>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-gray-800 rounded-xl p-6">
          <h2 class="text-2xl font-bold mb-6">Quick Actions</h2>

          <div class="space-y-4">
            <a href="/admin/foods" class="block">
              <div class="bg-gray-700 hover:bg-gray-600 rounded-lg p-4 transition-colors">
                <div class="flex items-center space-x-3">
                  <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-plus text-white"></i>
                  </div>
                  <div>
                    <div class="font-semibold">Add New Food Item</div>
                    <div class="text-sm text-gray-400">Add a new dish to the menu</div>
                  </div>
                </div>
              </div>
            </a>

            <a href="/admin/orders" class="block">
              <div class="bg-gray-700 hover:bg-gray-600 rounded-lg p-4 transition-colors">
                <div class="flex items-center space-x-3">
                  <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-list text-white"></i>
                  </div>
                  <div>
                    <div class="font-semibold">Manage Orders</div>
                    <div class="text-sm text-gray-400">Update order statuses</div>
                  </div>
                </div>
              </div>
            </a>

            <div class="bg-gray-700 hover:bg-gray-600 rounded-lg p-4 transition-colors cursor-pointer">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center">
                  <i class="fas fa-chart-bar text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">View Analytics</div>
                  <div class="text-sm text-gray-400">Sales and performance data</div>
                </div>
              </div>
            </div>

            <div class="bg-gray-700 hover:bg-gray-600 rounded-lg p-4 transition-colors cursor-pointer">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center">
                  <i class="fas fa-cog text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">Settings</div>
                  <div class="text-sm text-gray-400">Restaurant configuration</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Activity Only -->
  <section class="pb-20 px-4">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-3xl font-bold mb-8">Recent Activity</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-gray-800 rounded-xl p-6">
          <h3 class="text-xl font-bold mb-4">Order Status Summary</h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <span class="text-gray-300">Pending</span>
              <span class="text-yellow-500 font-semibold">{{ pendingOrders }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-gray-300">Preparing</span>
              <span class="text-blue-500 font-semibold">{{ preparingOrders }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-gray-300">Delivered</span>
              <span class="text-green-500 font-semibold">{{ deliveredOrders }}</span>
            </div>
          </div>
        </div>

        <div class="bg-gray-800 rounded-xl p-6">
          <h3 class="text-xl font-bold mb-4">System Activities</h3>
          <div class="space-y-3 text-sm">
            <div class="text-gray-300">
              <span class="text-green-500">✓</span> System initialized successfully
            </div>
            <div class="text-gray-300">
              <span class="text-blue-500">○</span> Database connected
            </div>
            <div class="text-gray-300">
              <span class="text-purple-500">○</span> Admin logged in
            </div>
            <div class="text-gray-300">
              <span class="text-green-500">✓</span> Real-time updates active
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
