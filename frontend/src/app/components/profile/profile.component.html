<div class="min-h-screen bg-gray-900 text-white">
  <!-- Navigation -->
  <nav class="fixed top-0 w-full z-50 bg-black/90 backdrop-blur-md border-b border-red-600/20" style="z-index: 100;">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="text-2xl font-bold text-gradient">CR7 FOODS</div>
        <div class="hidden md:flex space-x-8">
          <a routerLink="/home" routerLinkActive="text-red-600" class="hover:text-red-600 transition-colors">Home</a>
          <a routerLink="/menu" routerLinkActive="text-red-600" class="hover:text-red-600 transition-colors">Menu</a>
          <a routerLink="/about" routerLinkActive="text-red-600" class="hover:text-red-600 transition-colors">About</a>
          <a routerLink="/contact" routerLinkActive="text-red-600" class="hover:text-red-600 transition-colors">Contact</a>
        </div>
        <div class="flex space-x-4 items-center">
          <!-- Show cart if logged in -->
          <a routerLink="/cart" class="btn-secondary text-sm px-4 py-2 mr-2" *ngIf="isLoggedIn()">
            <i class="fas fa-shopping-cart mr-1"></i>
            Cart
          </a>
          <!-- User menu if logged in -->
          <div class="relative" *ngIf="isLoggedIn()">
            <button
              (click)="toggleUserMenu()"
              class="flex items-center space-x-2 btn-secondary text-sm px-4 py-2"
            >
              <i class="fas fa-user"></i>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <div
              *ngIf="showUserMenu"
              class="absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg"
            >
              <a routerLink="/profile" routerLinkActive="text-red-600" class="block px-4 py-2 hover:bg-gray-700">My Profile</a>
              <a routerLink="/orders" routerLinkActive="text-red-600" class="block px-4 py-2 hover:bg-gray-700">My Orders</a>
              <button
                (click)="logout()"
                class="block w-full text-left px-4 py-2 hover:bg-gray-700"
              >
                Logout
              </button>
            </div>
          </div>
          <!-- Login/Register if not logged in -->
          <div *ngIf="!isLoggedIn()">
            <a routerLink="/login" class="btn-outline text-sm px-4 py-2">Login</a>
            <a routerLink="/register" class="btn-primary text-sm px-4 py-2 ml-2">Sign Up</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Profile Header -->
  <section class="pt-24 pb-12 px-4">
    <div class="max-w-4xl mx-auto">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
        <div>
          <h1 class="text-4xl md:text-5xl font-bold text-gradient mb-4">
            My Profile
          </h1>
          <p class="text-xl text-gray-300">
            Manage your account information and preferences
          </p>
        </div>
        <div class="mt-4 md:mt-0">
          <button
            (click)="logout()"
            class="btn-outline px-6 py-3"
          >
            <i class="fas fa-sign-out-alt mr-2"></i>
            Logout
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Profile Content -->
  <section class="pb-20 px-4">
    <div class="max-w-4xl mx-auto">
      <div class="bg-gray-800 rounded-xl overflow-hidden">
        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-20">
          <div class="animate-spin w-12 h-12 border-4 border-red-600 border-t-transparent rounded-full mx-auto mb-4"></div>
          <p class="text-gray-400">Loading profile...</p>
        </div>

        <!-- Profile Content -->
        <div *ngIf="!isLoading" class="p-8">
          <!-- Error Message -->
          <div *ngIf="errorMessage" class="bg-red-600/20 border border-red-600 text-red-400 px-4 py-3 rounded-lg mb-6">
            <div class="flex items-center">
              <i class="fas fa-exclamation-triangle mr-2"></i>
              {{ errorMessage }}
            </div>
          </div>

          <!-- Success Message -->
          <div *ngIf="successMessage" class="bg-green-600/20 border border-green-600 text-green-400 px-4 py-3 rounded-lg mb-6">
            <div class="flex items-center">
              <i class="fas fa-check-circle mr-2"></i>
              {{ successMessage }}
            </div>
          </div>

          <!-- User Info Card -->
          <div class="bg-gray-700 rounded-lg p-6 mb-8">
            <div class="flex items-center space-x-4 mb-6">
              <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center">
                <i class="fas fa-user text-2xl text-white"></i>
              </div>
              <div>
                <h2 class="text-2xl font-bold">{{ currentUser?.name || 'User' }}</h2>
                <p class="text-gray-400">{{ currentUser?.email || '' }}</p>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gray-800 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-400">Member Since</p>
                    <p class="font-semibold">{{ currentUser?.createdAt ? (currentUser.createdAt | date:'mediumDate') : 'N/A' }}</p>
                  </div>
                  <i class="fas fa-calendar text-red-600 text-2xl"></i>
                </div>
              </div>
              <div class="bg-gray-800 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-400">Phone</p>
                    <p class="font-semibold">{{ currentUser?.phone || 'Not set' }}</p>
                  </div>
                  <i class="fas fa-phone text-blue-600 text-2xl"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Edit Profile Form -->
          <div class="bg-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-xl font-bold">Account Information</h3>
              <button
                (click)="toggleEditMode()"
                [class]="isEditing ? 'btn-secondary' : 'btn-primary'"
                class="px-4 py-2 rounded-lg text-sm"
              >
                {{ isEditing ? 'Cancel' : 'Edit Profile' }}
              </button>
            </div>

            <!-- View Mode -->
            <div *ngIf="!isEditing" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-400 mb-2">Full Name</label>
                  <p class="text-lg">{{ currentUser?.name || 'Not set' }}</p>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-400 mb-2">Email Address</label>
                  <p class="text-lg">{{ currentUser?.email || 'Not set' }}</p>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-400 mb-2">Phone Number</label>
                  <p class="text-lg">{{ currentUser?.phone || 'Not set' }}</p>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-400 mb-2">Delivery Address</label>
                  <p class="text-lg">{{ currentUser?.address || 'Not set' }}</p>
                </div>
              </div>
            </div>

            <!-- Edit Mode -->
            <form *ngIf="isEditing" (ngSubmit)="saveProfile()" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium mb-2">Full Name</label>
                  <input
                    type="text"
                    [(ngModel)]="profileData.name"
                    name="name"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-600 transition-colors"
                    placeholder="Enter your full name"
                    required
                  >
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Email Address</label>
                  <input
                    type="email"
                    [(ngModel)]="profileData.email"
                    name="email"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-600 transition-colors"
                    placeholder="Enter your email"
                    disabled
                  >
                  <p class="text-sm text-gray-400 mt-1">Email cannot be changed</p>
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Phone Number</label>
                  <input
                    type="tel"
                    [(ngModel)]="profileData.phone"
                    name="phone"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-600 transition-colors"
                    placeholder="Enter your phone number"
                  >
                </div>
                <div>
                  <label class="block text-sm font-medium mb-2">Delivery Address</label>
                  <textarea
                    [(ngModel)]="profileData.address"
                    name="address"
                    rows="3"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-red-600 transition-colors"
                    placeholder="Enter your delivery address"
                  ></textarea>
                </div>
              </div>

              <div class="flex space-x-4 pt-4">
                <button type="submit" class="btn-primary px-6 py-3">
                  Save Changes
                </button>
                <button type="button" (click)="toggleEditMode()" class="btn-secondary px-6 py-3">
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black py-12 px-4">
    <div class="max-w-7xl mx-auto text-center">
      <div class="text-3xl font-bold text-gradient mb-4">CR7 FOODS</div>
      <p class="text-gray-400 mb-6">Delivering happiness, one meal at a time</p>
      <div class="flex justify-center space-x-6">
        <a href="#" class="text-gray-400 hover:text-red-600 transition-colors">
          <i class="fab fa-facebook text-2xl"></i>
        </a>
        <a href="#" class="text-gray-400 hover:text-red-600 transition-colors">
          <i class="fab fa-instagram text-2xl"></i>
        </a>
        <a href="#" class="text-gray-400 hover:text-red-600 transition-colors">
          <i class="fab fa-twitter text-2xl"></i>
        </a>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-gray-500">
        <p>&copy; 2024 CR7 Foods. All rights reserved.</p>
      </div>
    </div>
  </footer>
</div>
